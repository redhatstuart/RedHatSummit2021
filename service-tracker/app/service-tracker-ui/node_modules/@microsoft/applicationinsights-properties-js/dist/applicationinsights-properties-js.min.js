/*!
 * Application Insights JavaScript SDK - Properties Plugin, 2.6.2
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,n=function(e){"use strict";var a="function",s="object",r="undefined",o="prototype",i="hasOwnProperty",t=Object,n=t[o],u=t.create,c=t.defineProperty,l=n[i];function f(){return typeof globalThis!==r&&globalThis?globalThis:typeof self!==r&&self?self:typeof window!==r&&window?window:typeof global!==r&&global?global:null}function d(e){throw new TypeError(e)}(f()||{}).Symbol,(f()||{}).Reflect;var g=function(e,n){return(g=t.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n[i](t)&&(e[t]=n[t])})(e,n)};function p(e,n){function t(){this.constructor=e}typeof n!==a&&null!==n&&d("Class extends value "+n+" is not a constructor or null"),g(e,n),e[o]=null===n?function(e){if(u)return u(e);if(null==e)return{};var n=typeof e;function t(){}return n!==s&&n!==a&&d("Object prototype may only be an Object:"+e),t[o]=e,new t}(n):(t[o]=n[o],new t)}var v,h="constructor",m="prototype",I="function",y="_dynInstFuncs",C="_isDynProxy",N="_dynClass",S="_dynCls$",x="_dynInstChk",w=x,T="_dfOpts",A="_unknown_",M="__proto__",E="useBaseInst",_="setInstFuncs",b=Object,L=b.getPrototypeOf,R=0;function P(e,n){return e&&b[m].hasOwnProperty.call(e,n)}function k(e){return e&&(e===b[m]||e===Array[m])}function D(e){return k(e)||e===Function[m]}function U(e){if(e){if(L)return L(e);if(e=e[M]||e[m]||(e[h]?e[h][m]:null))return e}return null}function F(e,n){var t=[],r=b.getOwnPropertyNames;if(r)t=r(e);else for(var o in e)"string"==typeof o&&P(e,o)&&t.push(o);if(t&&0<t.length)for(var i=0;i<t.length;i++)n(t[i])}function G(e,n,t){return n!==h&&typeof e[n]===I&&(t||P(e,n))}function O(e){throw new TypeError("DynamicProto: "+e)}function V(e,n){for(var t=e.length-1;0<=t;t--)if(e[t]===n)return 1}function B(e,n){return P(e,m)?e.name||n||A:((e||{})[h]||{}).name||n||A}function z(e,r,n,t){P(e,m)||O("theClass is an invalid class definition.");var o=e[m];!function(e){if(L)for(var n=[],t=U(r);t&&!D(t)&&!V(n,t);){if(t===e)return 1;n.push(t),t=U(t)}}(o)&&O("["+B(e)+"] is not in class hierarchy of ["+B(r)+"]");var i=null;P(o,N)?i=o[N]:(i=S+B(e,"_")+"$"+R,R++,o[N]=i);var a,s,u,c,l,f,d=z[T],g=!!d[E];g&&t&&t[E]!==undefined&&(g=!!t[E]),n(r,function(e,n,t,i){function r(e,n,t){var r,o=n[t];return o[C]&&i&&!1!==(r=e[y]||{})[w]&&(o=(r[n[N]]||{})[t]||o),function(){return o.apply(e,arguments)}}var o={};F(t,function(e){o[e]=r(n,t,e)});for(var a=U(e),s=[];a&&!D(a)&&!V(s,a);)F(a,function(e){!o[e]&&G(a,e,!L)&&(o[e]=r(n,a,e))}),s.push(a),a=U(a);return o}(o,r,(s={},F(a=r,function(e){!s[e]&&G(a,e,!1)&&(s[e]=a[e])}),e=s),g)),u=o,i=i,c=r,l=e,t=!1!==(d=(d=!!L&&!!d[_])&&t?!!t[_]:d),k(u)||(d=c[y]=c[y]||{},f=d[i]=d[i]||{},!1!==d[w]&&(d[w]=!!t),F(c,function(e){var t,r,o;G(c,e,!1)&&c[e]!==l[e]&&(f[e]=c[e],delete c[e],P(u,e)&&(!u[e]||u[e][C])||(u[e]=(t=u,r=e,(o=function(){var e,n;return(function(e,n,t,r){var o=null;if(e&&P(t,N)){var i=e[y]||{};if((o=(i[t[N]]||{})[n])||O("Missing ["+n+"] "+I),!o[x]&&!1!==i[w]){for(var a=!P(e,n),s=U(e),u=[];a&&s&&!D(s)&&!V(u,s);){var c=s[n];if(c){a=c===r;break}u.push(s),s=U(s)}try{a&&(e[n]=o),o[x]=1}catch(l){i[w]=!1}}}return o}(this,r,t,o)||(typeof(n=(n=t[e=r])===o?U(t)[e]:n)!==I&&O("["+e+"] is not a "+I),n)).apply(this,arguments)})[C]=1,o)))}))}z[T]={setInstFuncs:!0,useBaseInst:!0},(zn=v=v||{})[zn.CRITICAL=1]="CRITICAL",zn[zn.WARNING=2]="WARNING";var j={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},W=c;function H(e){return n.toString.call(e)}function X(e){return e===undefined||typeof e===r}function q(e){return null===e||X(e)}function K(e){return!q(e)}function J(e){return typeof e===a}function Z(e,n){if(e)for(var t in e)l.call(e,t)&&n.call(e,t,e[t])}function Y(e,n){return!(!e||!n||!~e.indexOf(n))}function $(e){return"string"==typeof e}function Q(e,n,t){for(var r=e.length,o=0;o<r&&!(o in e&&-1===n.call(t||e,e[o],o,e));o++);}function ee(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}var ne=!{toString:null}.propertyIsEnumerable("toString"),te=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function re(){var e=Date;return e.now?e.now():(new e).getTime()}function oe(e){return"[object Error]"===H(e)?e.name:""}function ie(e,n,t,r,o){var i=t;return e&&((i=e[n])===t||o&&!o(i)||r&&!r(t)||(e[n]=i=t)),i}function ae(e,n,t){var r;return e?!(r=e[n])&&q(r)&&(r=X(t)?{}:t,e[n]=r):r=X(t)?{}:t,r}function se(e){return!!e}var ue="window",ce="navigator",le="location",fe="JSON",de="crypto",ge="msCrypto",pe="msie",ve="trident/",he=null,me=null,Ie=!1;function ye(e){var n=f();return n&&n[e]?n[e]:e===ue&&Ce()?window:null}function Ce(){return typeof window===s&&window}function Ne(){return typeof navigator===s&&navigator?navigator:ye(ce)}function Se(e){return e&&Ie&&(e=ye("__mockLocation"))?e:typeof location===s&&location?location:ye(le)}function xe(){return typeof JSON===s&&JSON||null!==ye(fe)}function we(){return xe()?JSON||ye(fe):null}function Te(){var e=Ne();return!e||e.userAgent===me&&null!==he||(e=((me=e.userAgent)||"").toLowerCase(),he=Y(e,pe)||Y(e,ve)),he}function Ae(e){var n=Object[o].toString.call(e),t="";return"[object Error]"===n?t="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":xe()&&(t=we().stringify(e)),n+t}function Me(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var Ee=(_e.dataType="MessageData",_e);function _e(e,n,t,r){void 0===t&&(t=!1),this.messageId=e,this.message=(t?"AI: ":"AI (Internal): ")+e,e="",xe()&&(e=we().stringify(r)),e=(n?" message:"+Me(n):"")+(r?" props:"+Me(e):""),this.message+=e}function be(e,n){return(e||{}).logger||new Le(n)}var Le=function pt(t){this.identifier="DiagnosticLogger",this.queue=[];var o=0,a={};z(pt,this,function(i){function e(e,n){return q(e=t[e])?n:e}q(t)&&(t={}),i.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},i.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},i.throwInternal=function(e,n,t,r,o){if(t=new Ee(n,t,o=void 0!==o&&o,r),i.enableDebugExceptions())throw t;X(t)||!t||X(t.message)||(r=i.consoleLoggingLevel(),o?(o=+t.messageId,!a[o]&&r>=v.WARNING&&(i.warnToConsole(t.message),a[o]=!0)):r>=v.WARNING&&i.warnToConsole(t.message),i.logInternalMessage(e,t))},i.warnToConsole=function(e){var n,t=typeof console!==r?console:ye("console");t&&(n="log",J(t[n=t.warn?"warn":n])&&t[n](e))},i.resetInternalMessageCount=function(){o=0,a={}},i.logInternalMessage=function(e,n){var t,r;o>=i.maxInternalMessageLimit()||(t=!0,r="AITR_"+n.messageId,a[r]?t=!1:a[r]=!0,t&&(e<=i.telemetryLoggingLevel()&&(i.queue.push(n),o++),o===i.maxInternalMessageLimit()&&(n=new Ee(j.MessageLimitPerPVExceeded,e="Internal events throttle limit per PageView reached for this app.",!1),i.queue.push(n),i.warnToConsole(e))))}})},Re="ctx",Pe=(ke.ParentContextKey="parent",ke.ChildrenContextKey="childEvts",ke);function ke(e,o,n){var r,i=this,a=!1;i.start=re(),i.name=e,i.isAsync=n,i.isChildEvt=function(){return!1},J(o)&&(a=function(e){if(W)try{var n={enumerable:!0,configurable:!0,get:function(){return!r&&J(o)&&(r=o(),o=null),r}};return W(e,"payload",n),!0}catch(t){}return!1}(i)),i.getCtx=function(e){return e?(e===ke.ParentContextKey||e===ke.ChildrenContextKey?i:i[Re]||{})[e]:null},i.setCtx=function(e,n){e&&(e===ke.ParentContextKey?(i[e]||(i.isChildEvt=function(){return!0}),i[e]=n):e===ke.ChildrenContextKey?i[e]=n:(i[Re]=i[Re]||{})[e]=n)},i.complete=function(){var e=0,n=i.getCtx(ke.ChildrenContextKey);if("[object Array]"===H(n))for(var t=0;t<n.length;t++){var r=n[t];r&&(e+=r.time)}i.time=re()-i.start,i.exTime=i.time-e,i.complete=function(){},!a&&J(o)&&(i.payload=o())}}var De="CoreUtils.doPerf";function Ue(e,n,t,r,o){if(e){var i=e;if(i=i&&J(i.getPerfMgr)?i.getPerfMgr():i){var a,s=void 0,e=i.getCtx(De);try{if(s=i.create(n(),r,o))return e&&s.setCtx&&(s.setCtx(Pe.ParentContextKey,e),e.getCtx&&e.setCtx&&((a=e.getCtx(Pe.ChildrenContextKey))||(a=[],e.setCtx(Pe.ChildrenContextKey,a)),a.push(s))),i.setCtx(De,s),t(s)}catch(u){s&&s.setCtx&&s.setCtx("exception",u)}finally{s&&i.fire(s),i.setCtx(De,e)}}}return t()}var Fe=function(o,n){var i=this,a=null,s=J(o.processTelemetry),u=J(o.setNextPlugin);i._hasRun=!1,i.getPlugin=function(){return o},i.getNext=function(){return a},i.setNext=function(e){a=e},i.processTelemetry=function(t,r){var e=o?o.identifier:"TelemetryPluginChain";Ue((r=r||n)?r.core():null,function(){return e+":processTelemetry"},function(){if(o&&s){i._hasRun=!0;try{r.setNext(a),u&&o.setNextPlugin(a),a&&(a._hasRun=!1),o.processTelemetry(t,r)}catch(n){var e=a&&a._hasRun;a&&e||r.diagLog().throwInternal(v.CRITICAL,j.PluginException,"Plugin ["+o.identifier+"] failed during processTelemetry - "+n),a&&!e&&a.processTelemetry(t,r)}}else a&&(i._hasRun=!0,a.processTelemetry(t,r))},function(){return{item:t}},!t.sync)}};function Ge(e,n){var t=[];if(e&&0<e.length)for(var r=null,o=0;o<e.length;o++){var i=e[o];i&&J(i.processTelemetry)&&(i=new Fe(i,n),t.push(i),r&&r.setNext(i),r=i)}return 0<t.length?t[0]:null}var Oe=function vt(e,o,t,n){var r,i,a,s,u=this,c=null;null!==n&&(e&&J(e.getPlugin)?c=function(e,n,t){var r=[],o=!t;if(e)for(;e;){var i=e.getPlugin();!o&&i!==t||(o=!0,r.push(i)),e=e.getNext()}return o||r.push(t),Ge(r,n)}(e,u,n||e.getPlugin()):n?(r=u,a=e,s=!1,(i=n)&&e&&(a=[],Q(e,function(e){!s&&e!==i||(s=!0,a.push(e))})),i&&!s&&(a=a||[]).push(i),c=Ge(a,r)):X(n)&&(c=Ge(e,u))),u.core=function(){return t},u.diagLog=function(){return be(t,o)},u.getCfg=function(){return o},u.getExtCfg=function(e,n){var t,r;return void 0===n&&(n={}),!o||(r=o.extensionConfig)&&e&&(t=r[e]),t||n},u.getConfig=function(e,n,t){var r;return void 0===t&&(t=!1),(e=u.getExtCfg(e,null))&&!q(e[n])?r=e[n]:o&&!q(o[n])&&(r=o[n]),q(r)?t:r},u.hasNext=function(){return null!=c},u.getNext=function(){return c},u.setNext=function(e){c=e},u.processNext=function(e){var n=c;n&&(c=n.getNext(),n.processTelemetry(e,u))},u.createNew=function(e,n){return new vt((e=void 0===e?null:e)||c,o,t,n)}},Ve="getPlugin",Be=(ze.prototype.initialize=function(e,n,t,r){this._baseTelInit(e,n,t,r)},ze);function ze(){var i=this,a=!1,s=null,u=null;i.core=null,i.diagLog=function(e){return i._getTelCtx(e).diagLog()},i.isInitialized=function(){return a},i.setInitialized=function(e){a=e},i.setNextPlugin=function(e){u=e},i.processNext=function(e,n){n?n.processNext(e):u&&J(u.processTelemetry)&&u.processTelemetry(e,null)},i._getTelCtx=function(e){var n=e=void 0===e?null:e;return n||(e=s||new Oe(null,{},i.core),n=u&&u[Ve]?e.createNew(null,u[Ve]):e.createNew(null,u)),n},i._baseTelInit=function(e,n,t,r){e&&ie(e,"extensionConfig",[],null,q),!r&&n&&(r=n.getProcessTelContext().getNext());var o=u;u&&u[Ve]&&(o=u[Ve]()),i.core=n,s=new Oe(r,e,n,o),a=!0}}var je="toGMTString",We="toUTCString",He="cookie",Xe="expires",qe="enabled",Ke="isCookieUseDisabled",Je="disableCookiesUsage",Ze="_ckMgr",Ye="",$e=null,Qe=null,en=null,nn=typeof document===s&&document?document:ye("document"),tn={},rn={};function on(e){return!e||e.isEnabled()}function an(e,n){var t,r;return e?t=e.getCookieMgr():n&&(t=(n||{}).cookieCfg[Ze]||sn(n)),t||(r=n,n=(e||{}).logger,(e=sn[Ze]||rn[Ze])||(e=sn[Ze]=sn(r,n),rn[Ze]=e),t=e),t}function sn(e,r){var n,t,u=(ie(t=(n=e||rn).cookieCfg=n.cookieCfg||{},"domain",n.cookieDomain,K,q),ie(t,"path",n.cookiePath||"/",null,q),q(t[qe])&&(e=void 0,X(n[Ke])||(e=!n[Ke]),X(n[Je])||(e=!n[Je]),t[qe]=e),t),c=u.path||"/",l=u.domain,o=!1!==u[qe],f={isEnabled:function(){var e=o&&un(r),n=rn[Ze];return e&&n&&f!==n?on(n):e},setEnabled:function(e){o=!1!==e},set:function(e,n,t,r,o){var i,a,s;on(f)&&(i={},-1!=(s=(a=ee(n||Ye)).indexOf(";"))&&(a=ee(n.substring(0,s)),i=cn(n.substring(1+s))),ie(i,"domain",r||l,se,X),q(t)||(n=Te(),!X(i[Xe])||0<(s=re()+1e3*t)&&((r=new Date).setTime(s),ie(i,Xe,ln(r,n?je:We)||ln(r,n?je:We)||Ye,se)),n||ie(i,"max-age",Ye+t,null,X)),(t=Se())&&"https:"===t.protocol&&(ie(i,"secure",null,null,X),(Qe=null===Qe?!($(t=(Ne()||{}).userAgent)&&(Y(t,"CPU iPhone OS 12")||Y(t,"iPad; CPU OS 12")||Y(t,"Macintosh; Intel Mac OS X 10_14")&&Y(t,"Version/")&&Y(t,"Safari")||Y(t,"Macintosh; Intel Mac OS X 10_14")&&function(e,n){if(e){var t=e.length;if(e===n)return 1;if(40<=t){for(var r=t-1,o=39;0<=o;o--){if(e[r]!=n[o])return;r--}return 1}}}(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Y(t,"Chrome/5")||Y(t,"Chrome/6")||Y(t,"UnrealEngine")&&!Y(t,"Chrome")||Y(t,"UCBrowser/12")||Y(t,"UCBrowser/11"))):Qe)&&ie(i,"SameSite","None",null,X)),ie(i,"path",o||c,null,X),(u.setCookie||dn)(e,fn(a,i)))},get:function(e){var n=Ye;return on(f)?(u.getCookie||function(e){var n,t=Ye;return nn&&(n=nn[He]||Ye,en!==n&&(tn=cn(n),en=n),t=ee(tn[e]||Ye)),t})(e):n},del:function(e,n){on(f)&&f.purge(e,n)},purge:function(e,n){var t;un(r)&&((t={}).path=n||"/",t[Xe]="Thu, 01 Jan 1970 00:00:01 GMT",Te()||(t["max-age"]="0"),(u.delCookie||dn)(e,fn(Ye,t)))}};return f[Ze]=f}function un(e){if(null===$e){$e=!1;try{$e=(nn||{})[He]!==undefined}catch(n){e&&e.throwInternal(v.WARNING,j.CannotAccessCookie,"Cannot access document.cookie - "+oe(n),{exception:Ae(n)})}}return $e}function cn(e){var t={};return e&&e.length&&Q(ee(e).split(";"),function(e){var n;(e=ee(e||Ye))&&(-1==(n=e.indexOf("="))?t[e]=null:t[ee(e.substring(0,n))]=ee(e.substring(1+n)))}),t}function ln(e,n){return J(e[n])?e[n]():null}function fn(e,n){var t=e||Ye;return Z(n,function(e,n){t+="; "+e+(q(n)?Ye:"="+n)}),t}function dn(e,n){nn&&(nn[He]=e+"="+n)}var gn=4294967296,pn=4294967295,vn=!1,hn=123456789,mn=987654321;function In(e){var n,t=(t=ye(de)||ye(ge))&&t.getRandomValues?t.getRandomValues(new Uint32Array(1))[0]&pn:Te()?(vn||function(){try{var e=2147483647&re();(n=(Math.random()*gn^e)+e)<0&&(n>>>=0),hn=123456789+n&pn,mn=987654321-n&pn,vn=!0}catch(t){}var n}(),n=((mn=36969*(65535&mn)+(mn>>16)&pn)<<16)+(65535&(hn=18e3*(65535&hn)+(hn>>16)&pn))>>>0&pn|0,(n>>>=0)&pn):Math.floor(gn*Math.random()|0);return e||(t>>>=0),t}function yn(e){void 0===e&&(e=22);for(var n=In()>>>0,t=0,r="";r.length<e;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&n]||"",n>>>=6,5==++t&&(n=(In()<<2&4294967295|3&n)>>>0,t=0);return r}var Cn,Nn,Sn=(xn.sanitizeKeyAndAddUniqueness=function(e,n,t){var r=n.length,o=xn.sanitizeKey(e,n);if(o.length!==r){for(var i=0,a=o;t[a]!==undefined;)i++,a=o.substring(0,xn.MAX_NAME_LENGTH-3)+xn.padNumber(i);o=a}return o},xn.sanitizeKey=function(e,n){var t;return n&&(n=xn.trim(n.toString())).length>xn.MAX_NAME_LENGTH&&(t=n.substring(0,xn.MAX_NAME_LENGTH),e.throwInternal(v.WARNING,j.NameTooLong,"name is too long.  It has been truncated to "+xn.MAX_NAME_LENGTH+" characters.",{name:n},!0)),t||n},xn.sanitizeString=function(e,n,t){var r;return void 0===t&&(t=xn.MAX_STRING_LENGTH),n&&(t=t||xn.MAX_STRING_LENGTH,(n=xn.trim(n)).toString().length>t&&(r=n.toString().substring(0,t),e.throwInternal(v.WARNING,j.StringValueTooLong,"string value is too long. It has been truncated to "+t+" characters.",{value:n},!0))),r||n},xn.sanitizeUrl=function(e,n){return xn.sanitizeInput(e,n,xn.MAX_URL_LENGTH,j.UrlTooLong)},xn.sanitizeMessage=function(e,n){var t;return n&&n.length>xn.MAX_MESSAGE_LENGTH&&(t=n.substring(0,xn.MAX_MESSAGE_LENGTH),e.throwInternal(v.WARNING,j.MessageTruncated,"message is too long, it has been truncated to "+xn.MAX_MESSAGE_LENGTH+" characters.",{message:n},!0)),t||n},xn.sanitizeException=function(e,n){var t;return n&&n.length>xn.MAX_EXCEPTION_LENGTH&&(t=n.substring(0,xn.MAX_EXCEPTION_LENGTH),e.throwInternal(v.WARNING,j.ExceptionTruncated,"exception is too long, it has been truncated to "+xn.MAX_EXCEPTION_LENGTH+" characters.",{exception:n},!0)),t||n},xn.sanitizeProperties=function(r,e){var o;return e&&(o={},Z(e,function(e,n){if(typeof n===s&&xe())try{n=we().stringify(n)}catch(t){r.throwInternal(v.WARNING,j.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:t},!0)}n=xn.sanitizeString(r,n,xn.MAX_PROPERTY_LENGTH),e=xn.sanitizeKeyAndAddUniqueness(r,e,o),o[e]=n}),e=o),e},xn.sanitizeMeasurements=function(t,e){var r;return e&&(r={},Z(e,function(e,n){e=xn.sanitizeKeyAndAddUniqueness(t,e,r),r[e]=n}),e=r),e},xn.sanitizeId=function(e,n){return n&&xn.sanitizeInput(e,n,xn.MAX_ID_LENGTH,j.IdTooLong).toString()},xn.sanitizeInput=function(e,n,t,r){var o;return n&&(n=xn.trim(n)).length>t&&(o=n.substring(0,t),e.throwInternal(v.WARNING,r,"input is too long, it has been truncated to "+t+" characters.",{data:n},!0)),o||n},xn.padNumber=function(e){return(e="00"+e).substr(e.length-3)},xn.trim=function(e){return $(e)?e.replace(/^\s+|\s+$/g,""):e},xn.MAX_NAME_LENGTH=150,xn.MAX_ID_LENGTH=128,xn.MAX_PROPERTY_LENGTH=8192,xn.MAX_STRING_LENGTH=1024,xn.MAX_URL_LENGTH=2048,xn.MAX_MESSAGE_LENGTH=32768,xn.MAX_EXCEPTION_LENGTH=32768,xn);function xn(){}(jn=Cn=Cn||{})[jn.LocalStorage=0]="LocalStorage",jn[jn.SessionStorage=1]="SessionStorage",(Wn=Nn={})[Wn.Default=0]="Default",Wn[Wn.Required=1]="Required",Wn[Wn.Array=2]="Array",Wn[Wn.Hidden=4]="Hidden",(Hn={})[Hn.AI=0]="AI",Hn[Hn.AI_AND_W3C=1]="AI_AND_W3C",Hn[Hn.W3C=2]="W3C";var wn=undefined;function Tn(){return Mn()?An(Cn.LocalStorage):null}function An(e){try{if(q(f()))return null;var n=new Date,t=ye(e===Cn.LocalStorage?"localStorage":"sessionStorage");t.setItem(n.toString(),n.toString());var r=t.getItem(n.toString())!==n.toString();if(t.removeItem(n.toString()),!r)return t}catch(o){}return null}function Mn(){return wn=wn===undefined?!!An(Cn.LocalStorage):wn}function En(e,n){var t=Tn();if(null!==t)try{return t.getItem(n)}catch(r){wn=!1,e.throwInternal(v.WARNING,j.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+oe(r),{exception:Ae(r)})}return null}function _n(e,n,t){var r=Tn();if(null!==r)try{return r.setItem(n,t),1}catch(o){wn=!1,e.throwInternal(v.WARNING,j.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+oe(o),{exception:Ae(o)})}}function bn(e,n){var t=Tn();if(null!==t)try{return t.removeItem(n),1}catch(r){wn=!1,e.throwInternal(v.WARNING,j.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+oe(r),{exception:Ae(r)})}}var Ln,Rn=(p(Pn,Ln=function(){this.ver=2,this.properties={},this.measurements={}}),Pn);function Pn(){var e=Ln.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var kn,Dn=(p(Un,kn=Rn),Un.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Un.dataType="PageviewData",Un);function Un(e,n,t,r,o,i,a){var s,u=kn.call(this)||this;return u.aiDataContract={ver:Nn.Required,name:Nn.Default,url:Nn.Default,duration:Nn.Default,properties:Nn.Default,measurements:Nn.Default,id:Nn.Default},u.id=Sn.sanitizeId(e,a),u.url=Sn.sanitizeUrl(e,t),u.name=Sn.sanitizeString(e,n)||"not_specified",isNaN(r)||(u.duration=(a=""+(s=Math.round(s=isNaN(s=r)||s<0?0:s))%1e3,t=""+Math.floor(s/1e3)%60,n=""+Math.floor(s/6e4)%60,r=""+Math.floor(s/36e5)%24,a=1===a.length?"00"+a:2===a.length?"0"+a:a,t=t.length<2?"0"+t:t,n=n.length<2?"0"+n:n,(0<(s=Math.floor(s/864e5))?s+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t+"."+a)),u.properties=Sn.sanitizeProperties(e,o),u.measurements=Sn.sanitizeMeasurements(e,i),u}function Fn(e){var n="ai."+e+".";return function(e){return n+e}}var Gn,On,Vn=Fn("application"),Bn=Fn("device"),zn=Fn("location"),c=Fn("operation"),jn=Fn("session"),Wn=Fn("user"),Hn=Fn("cloud"),Rn=Fn("internal"),Rn=(On={applicationVersion:Vn("ver"),applicationBuild:Vn("build"),applicationTypeId:Vn("typeId"),applicationId:Vn("applicationId"),applicationLayer:Vn("layer"),deviceId:Bn("id"),deviceIp:Bn("ip"),deviceLanguage:Bn("language"),deviceLocale:Bn("locale"),deviceModel:Bn("model"),deviceFriendlyName:Bn("friendlyName"),deviceNetwork:Bn("network"),deviceNetworkName:Bn("networkName"),deviceOEMName:Bn("oemName"),deviceOS:Bn("os"),deviceOSVersion:Bn("osVersion"),deviceRoleInstance:Bn("roleInstance"),deviceRoleName:Bn("roleName"),deviceScreenResolution:Bn("screenResolution"),deviceType:Bn("type"),deviceMachineName:Bn("machineName"),deviceVMName:Bn("vmName"),deviceBrowser:Bn("browser"),deviceBrowserVersion:Bn("browserVersion"),locationIp:zn("ip"),locationCountry:zn("country"),locationProvince:zn("province"),locationCity:zn("city"),operationId:c("id"),operationName:c("name"),operationParentId:c("parentId"),operationRootId:c("rootId"),operationSyntheticSource:c("syntheticSource"),operationCorrelationVector:c("correlationVector"),sessionId:jn("id"),sessionIsFirst:jn("isFirst"),sessionIsNew:jn("isNew"),userAccountAcquisitionDate:Wn("accountAcquisitionDate"),userAccountId:Wn("accountId"),userAgent:Wn("userAgent"),userId:Wn("id"),userStoreRegion:Wn("storeRegion"),userAuthUserId:Wn("authUserId"),userAnonymousUserAcquisitionDate:Wn("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Wn("authUserAcquisitionDate"),cloudName:Hn("name"),cloudRole:Hn("role"),cloudRoleVer:Hn("roleVer"),cloudRoleInstance:Hn("roleInstance"),cloudEnvironment:Hn("environment"),cloudLocation:Hn("location"),cloudDeploymentUnit:Hn("deploymentUnit"),internalNodeName:Rn("nodeName"),internalSdkVersion:Rn("sdkVersion"),internalAgentVersion:Rn("agentVersion"),internalSnippet:Rn("snippet"),internalSdkSrc:Rn("sdkSrc")},p(Xn,Gn=function(){var t=this;Z(On,function(e,n){t[e]=n})}),Xn);function Xn(){return Gn.call(this)||this}var qn=new Rn,Kn="AppInsightsPropertiesPlugin",Jn="AppInsightsChannelPlugin",Zn="ai_session",Yn=function(){},$n=(Qn.acquisitionSpan=864e5,Qn.renewalSpan=18e5,Qn.cookieUpdateInterval=6e4,Qn);function Qn(e,n){var f,d,g=be(n),p=an(n);z(Qn,this,function(u){function c(e,n){var t=!1,r=", session will be reset",o=n.split("|");if(2<=o.length)try{var i=+o[1]||0,a=+o[2]||0;isNaN(i)||i<=0?g.throwInternal(v.WARNING,j.SessionRenewalDateIsZero,"AI session acquisition date is 0"+r):isNaN(a)||a<=0?g.throwInternal(v.WARNING,j.SessionRenewalDateIsZero,"AI session renewal date is 0"+r):o[0]&&(e.id=o[0],e.acquisitionDate=i,e.renewalDate=a,t=!0)}catch(s){g.throwInternal(v.CRITICAL,j.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(n||"")+"]"+r+" - "+oe(s),{exception:Ae(s)})}return t}function l(e,n){var t=e.acquisitionDate;e.renewalDate=n;var r=u.config,o=r.sessionRenewalMs(),i=t+r.sessionExpirationMs()-n,e=[e.id,t,n],t=i<o?i/1e3:o/1e3,o=r.cookieDomain?r.cookieDomain():null;p.set(f(),e.join("|"),0<r.sessionExpirationMs()?t:null,o),d=n}J((e=e||{}).sessionExpirationMs)||(e.sessionExpirationMs=function(){return Qn.acquisitionSpan}),J(e.sessionRenewalMs)||(e.sessionRenewalMs=function(){return Qn.renewalSpan}),u.config=e,f=function(){return u.config.namePrefix&&u.config.namePrefix()?Zn+u.config.namePrefix():Zn},u.automaticSession=new Yn,u.update=function(){var e,n=re(),t=!1,r=u.automaticSession;r.id||(o=r,s=!1,t=!((s=(e=p.get(f()))&&J(e.split)||(e=En(g,f()))?c(o,e):s)||o.id));var o,i,a,s=u.config.sessionExpirationMs();!t&&0<s&&(i=u.config.sessionRenewalMs(),o=n-r.acquisitionDate,a=n-r.renewalDate,t=(t=(t=o<0||a<0)||s<o)||i<a),t?(i=n,t=((a=u.config||{}).getNewId?a.getNewId():null)||yn,u.automaticSession.id=t(a.idLength?a.idLength():22),u.automaticSession.acquisitionDate=i,l(u.automaticSession,i),Mn()||g.throwInternal(v.WARNING,j.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")):(!d||Qn.cookieUpdateInterval<n-d)&&l(r,n)},u.backup=function(){var e=(t=u.automaticSession).id,n=t.acquisitionDate,t=t.renewalDate;_n(g,f(),[e,n,t].join("|"))}})}var et=function(){},nt=function(){this.id="browser",this.deviceClass="Browser"},tt=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.6.2"};function rt(e){return"string"==typeof e&&e&&!e.match(/,|;|=| |\|/)}var ot=(it.cookieSeparator="|",it.userCookieName="ai_user",it.authUserCookieName="ai_authUser",it);function it(o,e){this.isNewUser=!1;var i=be(e),a=an(e);z(it,this,function(r){var e,n=a.get(it.userCookieName);n&&(r.isNewUser=!1,0<(e=n.split(it.cookieSeparator)).length&&(r.id=e[0])),r.config=o,r.id||(e=((t=o||{}).getNewId?t.getNewId():null)||yn,r.id=e(t.idLength?o.idLength():22),t=function(e){if("[object Date]"===H(e)){var n=function(e){return 1===(e=""+e).length?"0"+e:e};return e.getUTCFullYear()+"-"+n(1+e.getUTCMonth())+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+(""+(e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(new Date),r.accountAcquisitionDate=t,r.isNewUser=!0,t=[r.id,t],a.set(it.userCookieName,t.join(it.cookieSeparator),31536e3),t=o.namePrefix&&o.namePrefix()?o.namePrefix()+"ai_session":"ai_session",bn(i,t)),r.accountId=o.accountId?o.accountId():undefined;var t=a.get(it.authUserCookieName);t&&((t=(t=decodeURI(t)).split(it.cookieSeparator))[0]&&(r.authenticatedId=t[0]),1<t.length&&t[1]&&(r.accountId=t[1])),r.setAuthenticatedUserContext=function(e,n,t){void 0===t&&(t=!1),!rt(e)||n&&!rt(n)?i.throwInternal(v.WARNING,j.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0):(r.authenticatedId=e,e=r.authenticatedId,n&&(r.accountId=n,e=[r.authenticatedId,r.accountId].join(it.cookieSeparator)),t&&a.set(it.authUserCookieName,encodeURI(e)))},r.clearAuthenticatedUserContext=function(){r.authenticatedId=null,r.accountId=null,a.del(it.authUserCookieName)}})}var at=function(){},st=function(e,n,t,r){var o=this;o.traceID=e||function(){for(var e,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t="",r=0;r<4;r++)t+=n[15&(e=In())]+n[e>>4&15]+n[e>>8&15]+n[e>>12&15]+n[e>>16&15]+n[e>>20&15]+n[e>>24&15]+n[e>>28&15];var o=n[8+(3&In())|0];return t.substr(0,8)+t.substr(9,4)+"4"+t.substr(13,3)+o+t.substr(16,3)+t.substr(19,12)}(),o.parentID=n,o.name=t,n=Se(),!t&&n&&n.pathname&&(o.name=n.pathname),o.name=Sn.sanitizeString(r,o.name)},ut="ext",ct="tags";function lt(e,n){e&&e[n]&&0===function(e){var n=typeof e;n===a||n===s&&null!==e||d("objKeys called on non-object");var t,r=[];for(t in e)e&&l.call(e,t)&&r.push(t);if(ne)for(var o=te.length,i=0;i<o;i++)e&&l.call(e,te[i])&&r.push(te[i]);return r}(e[n]).length&&delete e[n]}var ft,dt=function ht(e,n){var r=this,t=e.logger;this.appId=function(){return null},z(ht,this,function(o){o.application=new et,o.internal=new tt(n),Ce()&&(o.sessionManager=new $n(n,e),o.device=new nt,o.location=new at,o.user=new ot(n,e),o.telemetryTrace=new st(undefined,undefined,undefined,t),o.session=new Yn),o.applySessionContext=function(e,n){var t=o.session,r=o.sessionManager;t&&$(t.id)?ie(ae(e.ext,"app"),"sesId",t.id):r&&r.automaticSession&&ie(ae(e.ext,"app"),"sesId",r.automaticSession.id,$)},o.applyOperatingSystemContxt=function(e,n){ie(e.ext,"os",o.os)},o.applyApplicationContext=function(e,n){var t=o.application;t&&(ie(e=ae(e,ct),qn.applicationVersion,t.ver,$),ie(e,qn.applicationBuild,t.build,$))},o.applyDeviceContext=function(e,n){var t=o.device;t&&(ie(e=ae(ae(e,ut),"device"),"localId",t.id,$),ie(e,"ip",t.ip,$),ie(e,"model",t.model,$),ie(e,"deviceClass",t.deviceClass,$))},o.applyInternalContext=function(e,n){var t,r=o.internal;r&&(ie(t=ae(e,ct),qn.internalAgentVersion,r.agentVersion,$),ie(t,qn.internalSdkVersion,r.sdkVersion,$),e.baseType!==Ee.dataType&&e.baseType!==Dn.dataType||(ie(t,qn.internalSnippet,r.snippetVer,$),ie(t,qn.internalSdkSrc,r.sdkSrc,$)))},o.applyLocationContext=function(e,n){var t=r.location;t&&ie(ae(e,ct,[]),qn.locationIp,t.ip,$)},o.applyOperationContext=function(e,n){var t=o.telemetryTrace;t&&(ie(e=ae(ae(e,ut),"trace",{traceID:undefined,parentID:undefined}),"traceID",t.traceID,$),ie(e,"name",t.name,$),ie(e,"parentID",t.parentID,$))},o.applyWebContext=function(e,n){var t=r.web;t&&ie(ae(e,ut),"web",t)},o.applyUserContext=function(e,n){var t=o.user;t&&(ie(ae(e,ct,[]),qn.userAccountId,t.accountId,$),ie(e=ae(ae(e,ut),"user"),"id",t.id,$),ie(e,"authId",t.authenticatedId,$))},o.cleanUp=function(e,n){(e=e.ext)&&(lt(e,"device"),lt(e,"user"),lt(e,"web"),lt(e,"os"),lt(e,"app"),lt(e,"trace"))}})},Be=(p(gt,ft=Be),gt.getDefaultConfig=function(){return{instrumentationKey:function(){return undefined},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){return undefined},idLength:function(){return 22},getNewId:function(){return null}}},gt);function gt(){var l,f,e=ft.call(this)||this;return e.priority=110,e.identifier=Kn,z(gt,e,function(u,c){u.initialize=function(e,n,t,r){c.initialize(e,n,t,r);var o,i,a=u._getTelCtx(),s=u.identifier,r=gt.getDefaultConfig();f=f||{},Z(r,function(e,n){f[e]=function(){return a.getConfig(s,e,n())}}),u.context=new dt(n,f),o=Jn,i=null,Q(t,function(e){if(e.identifier===o)return i=e,-1}),l=i,u.context.appId=function(){return l?l._appId:null},u._extConfig=f},u.processTelemetry=function(e,n){var t;q(e)||(n=u._getTelCtx(n),e.name===Dn.envelopeType&&n.diagLog().resetInternalMessageCount(),(t=u.context||{}).session&&"string"!=typeof u.context.session.id&&t.sessionManager&&t.sessionManager.update(),function(e,n){ae(e,"tags",[]),ae(e,"ext",{});var t=u.context;t.applySessionContext(e,n),t.applyApplicationContext(e,n),t.applyDeviceContext(e,n),t.applyOperationContext(e,n),t.applyUserContext(e,n),t.applyOperatingSystemContxt(e,n),t.applyWebContext(e,n),t.applyLocationContext(e,n),t.applyInternalContext(e,n),t.cleanUp(e,n)}(e,n),t.user&&t.user.isNewUser&&(t.user.isNewUser=!1,t=new Ee(j.SendBrowserInfoOnUserInit,(Ne()||{}).userAgent||""),n.diagLog().logInternalMessage(v.CRITICAL,t)),u.processNext(e,n))}}),e}e.PropertiesPlugin=Be,e.Session=Yn,e.SessionManager=$n,e.TelemetryContext=dt,e.TelemetryTrace=st,function(e,n,t){var r=Object.defineProperty;if(r)try{return r(e,n,t)}catch(o){}typeof t.value!==undefined&&(e[n]=t.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self).Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
//# sourceMappingURL=applicationinsights-properties-js.min.js.map
