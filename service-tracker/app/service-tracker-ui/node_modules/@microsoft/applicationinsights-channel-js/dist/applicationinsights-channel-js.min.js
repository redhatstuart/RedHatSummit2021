/*!
 * Application Insights JavaScript SDK - Channel, 2.6.2
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,t=function(e){"use strict";var r="function",a="object",s="undefined",i="prototype",o="hasOwnProperty",n=Object,u=n[i],t=n.assign,l=n.create,c=n.defineProperty,d=u[o];function f(){return typeof globalThis!==s&&globalThis?globalThis:typeof self!==s&&self?self:typeof window!==s&&window?window:typeof global!==s&&global?global:null}function p(e){throw new TypeError(e)}(f()||{}).Symbol,(f()||{}).Reflect;var g=t||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])u[o].call(t,a)&&(e[a]=t[a]);return e},h=function(e,t){return(h=n.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[o](n)&&(e[n]=t[n])})(e,t)};function m(e,t){function n(){this.constructor=e}typeof t!==r&&null!==t&&p("Class extends value "+t+" is not a constructor or null"),h(e,t),e[i]=null===t?function(e){if(l)return l(e);if(null==e)return{};var t=typeof e;function n(){}return t!==a&&t!==r&&p("Object prototype may only be an Object:"+e),n[i]=e,new n}(t):(n[i]=t[i],new n)}var _,v="constructor",y="prototype",I="function",C="_dynInstFuncs",S="_isDynProxy",T="_dynClass",A="_dynCls$",w="_dynInstChk",R=w,E="_dfOpts",N="_unknown_",x="__proto__",b="useBaseInst",L="setInstFuncs",D=Object,M=D.getPrototypeOf,F=0;function P(e,t){return e&&D[y].hasOwnProperty.call(e,t)}function k(e){return e&&(e===D[y]||e===Array[y])}function z(e){return k(e)||e===Function[y]}function B(e){if(e){if(M)return M(e);if(e=e[x]||e[y]||(e[v]?e[v][y]:null))return e}return null}function q(e,t){var n=[],r=D.getOwnPropertyNames;if(r)n=r(e);else for(var a in e)"string"==typeof a&&P(e,a)&&n.push(a);if(n&&0<n.length)for(var i=0;i<n.length;i++)t(n[i])}function G(e,t,n){return t!==v&&typeof e[t]===I&&(n||P(e,t))}function U(e){throw new TypeError("DynamicProto: "+e)}function O(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}function H(e,t){return P(e,y)?e.name||t||N:((e||{})[v]||{}).name||t||N}function K(e,r,t,n){P(e,y)||U("theClass is an invalid class definition.");var a=e[y];!function(e){if(M)for(var t=[],n=B(r);n&&!z(n)&&!O(t,n);){if(n===e)return 1;t.push(n),n=B(n)}}(a)&&U("["+H(e)+"] is not in class hierarchy of ["+H(r)+"]");var i=null;P(a,T)?i=a[T]:(i=A+H(e,"_")+"$"+F,F++,a[T]=i);var o,s,u,l,c,d,f=K[E],p=!!f[b];p&&n&&n[b]!==undefined&&(p=!!n[b]),t(r,function(e,t,n,i){function r(e,t,n){var r,a=t[n];return a[S]&&i&&!1!==(r=e[C]||{})[R]&&(a=(r[t[T]]||{})[n]||a),function(){return a.apply(e,arguments)}}var a={};q(n,function(e){a[e]=r(t,n,e)});for(var o=B(e),s=[];o&&!z(o)&&!O(s,o);)q(o,function(e){!a[e]&&G(o,e,!M)&&(a[e]=r(t,o,e))}),s.push(o),o=B(o);return a}(a,r,(s={},q(o=r,function(e){!s[e]&&G(o,e,!1)&&(s[e]=o[e])}),e=s),p)),u=a,i=i,l=r,c=e,n=!1!==(f=(f=!!M&&!!f[L])&&n?!!n[L]:f),k(u)||(f=l[C]=l[C]||{},d=f[i]=f[i]||{},!1!==f[R]&&(f[R]=!!n),q(l,function(e){var n,r,a;G(l,e,!1)&&l[e]!==c[e]&&(d[e]=l[e],delete l[e],P(u,e)&&(!u[e]||u[e][S])||(u[e]=(n=u,r=e,(a=function(){var e,t;return(function(e,t,n,r){var a=null;if(e&&P(n,T)){var i=e[C]||{};if((a=(i[n[T]]||{})[t])||U("Missing ["+t+"] "+I),!a[w]&&!1!==i[R]){for(var o=!P(e,t),s=B(e),u=[];o&&s&&!z(s)&&!O(u,s);){var l=s[t];if(l){o=l===r;break}u.push(s),s=B(s)}try{o&&(e[t]=a),a[w]=1}catch(c){i[R]=!1}}}return a}(this,r,n,a)||(typeof(t=(t=n[e=r])===a?B(n)[e]:t)!==I&&U("["+e+"] is not a "+I),t)).apply(this,arguments)})[S]=1,a)))}))}K[E]={setInstFuncs:!0,useBaseInst:!0},(Nt=_=_||{})[Nt.CRITICAL=1]="CRITICAL",Nt[Nt.WARNING=2]="WARNING";var X={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103},j="attachEvent",V="addEventListener",W="detachEvent",Y="removeEventListener",J=c;function Z(e){return u.toString.call(e)}function $(e){return e===undefined||typeof e===s}function Q(e){return null===e||$(e)}function ee(e){return typeof e===a}function te(e){return typeof e===r}function ne(e,t,n,r){void 0===r&&(r=!1);var a=!1;if(!Q(e))try{Q(e[V])?Q(e[j])||(e[j]("on"+t,n),a=!0):(e[V](t,n,r),a=!0)}catch(i){}return a}function re(e,t,n,r){if(void 0===r&&(r=!1),!Q(e))try{Q(e[Y])?Q(e[W])||e[W]("on"+t,n):e[Y](t,n,r)}catch(a){}}function ae(e,t){if(e)for(var n in e)d.call(e,n)&&t.call(e,n,e[n])}function ie(e,t){return e&&t&&~e.indexOf(t)}function oe(e){return"[object Array]"===Z(e)}function se(e){return"[object Error]"===Z(e)}function ue(e){return"string"==typeof e}function le(e){if("[object Date]"===Z(e)){var t=function(e){return 1===(e=""+e).length?"0"+e:e};return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(""+(e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function ce(e,t,n){for(var r=e.length,a=0;a<r&&!(a in e&&-1===t.call(n||e,e[a],a,e));a++);}function de(e,t,n){for(var r=e.length,a=n||e,i=Array(r),o=0;o<r;o++)o in e&&(i[o]=t.call(a,e[o],e));return i}function fe(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}function pe(){var e=Date;return e.now?e.now():(new e).getTime()}function ge(e){return se(e)?e.name:""}function he(e,t,n,r,a){var i=n;return e&&((i=e[t])===n||a&&!a(i)||r&&!r(n)||(e[t]=i=n)),i}function me(e){return!!e}function ve(e){return e&&n(t?t({},e):e)}({toString:null}).propertyIsEnumerable("toString");var ye="window",Ie="document",Ce="navigator",Se="JSON",Te="msie",_e="trident/";function Ae(e){var t=f();return t&&t[e]?t[e]:e===ye&&we()?window:null}function we(){return typeof window===a&&window}function Re(){return we()?window:Ae(ye)}function Ee(){return typeof document===a&&document?document:Ae(Ie)}function Ne(){return typeof navigator===a&&navigator?navigator:Ae(Ce)}function xe(){return typeof JSON===a&&JSON||null!==Ae(Se)}function be(){return xe()?JSON||Ae(Se):null}function Le(e){var t=Object[i].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":xe()&&(n=be().stringify(e)),t+n}function De(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var Me=(Fe.dataType="MessageData",Fe);function Fe(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e,e="",xe()&&(e=be().stringify(r)),e=(t?" message:"+De(t):"")+(r?" props:"+De(e):""),this.message+=e}function Pe(e,t){return(e||{}).logger||new ke(t)}var ke=function cr(n){this.identifier="DiagnosticLogger",this.queue=[];var a=0,o={};K(cr,this,function(i){function e(e,t){return Q(e=n[e])?t:e}Q(n)&&(n={}),i.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},i.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},i.throwInternal=function(e,t,n,r,a){if(n=new Me(t,n,a=void 0!==a&&a,r),i.enableDebugExceptions())throw n;$(n)||!n||$(n.message)||(r=i.consoleLoggingLevel(),a?(a=+n.messageId,!o[a]&&r>=_.WARNING&&(i.warnToConsole(n.message),o[a]=!0)):r>=_.WARNING&&i.warnToConsole(n.message),i.logInternalMessage(e,n))},i.warnToConsole=function(e){var t,n=typeof console!==s?console:Ae("console");n&&(t="log",te(n[t=n.warn?"warn":t])&&n[t](e))},i.resetInternalMessageCount=function(){a=0,o={}},i.logInternalMessage=function(e,t){var n,r;a>=i.maxInternalMessageLimit()||(n=!0,r="AITR_"+t.messageId,o[r]?n=!1:o[r]=!0,n&&(e<=i.telemetryLoggingLevel()&&(i.queue.push(t),a++),a===i.maxInternalMessageLimit()&&(t=new Me(X.MessageLimitPerPVExceeded,e="Internal events throttle limit per PageView reached for this app.",!1),i.queue.push(t),i.warnToConsole(e))))}})},ze="ctx",Be=(qe.ParentContextKey="parent",qe.ChildrenContextKey="childEvts",qe);function qe(e,a,t){var r,i=this,o=!1;i.start=pe(),i.name=e,i.isAsync=t,i.isChildEvt=function(){return!1},te(a)&&(o=function(e){if(J)try{var t={enumerable:!0,configurable:!0,get:function(){return!r&&te(a)&&(r=a(),a=null),r}};return J(e,"payload",t),!0}catch(n){}return!1}(i)),i.getCtx=function(e){return e?(e===qe.ParentContextKey||e===qe.ChildrenContextKey?i:i[ze]||{})[e]:null},i.setCtx=function(e,t){e&&(e===qe.ParentContextKey?(i[e]||(i.isChildEvt=function(){return!0}),i[e]=t):e===qe.ChildrenContextKey?i[e]=t:(i[ze]=i[ze]||{})[e]=t)},i.complete=function(){var e=0,t=i.getCtx(qe.ChildrenContextKey);if(oe(t))for(var n=0;n<t.length;n++){var r=t[n];r&&(e+=r.time)}i.time=pe()-i.start,i.exTime=i.time-e,i.complete=function(){},!o&&te(a)&&(i.payload=a())}}var Ge="CoreUtils.doPerf";function Ue(e,t,n,r,a){if(e){var i=e;if(i=i&&te(i.getPerfMgr)?i.getPerfMgr():i){var o,s=void 0,e=i.getCtx(Ge);try{if(s=i.create(t(),r,a))return e&&s.setCtx&&(s.setCtx(Be.ParentContextKey,e),e.getCtx&&e.setCtx&&((o=e.getCtx(Be.ChildrenContextKey))||(o=[],e.setCtx(Be.ChildrenContextKey,o)),o.push(s))),i.setCtx(Ge,s),n(s)}catch(u){s&&s.setCtx&&s.setCtx("exception",u)}finally{s&&i.fire(s),i.setCtx(Ge,e)}}}return n()}var Oe=function(a,t){var i=this,o=null,s=te(a.processTelemetry),u=te(a.setNextPlugin);i._hasRun=!1,i.getPlugin=function(){return a},i.getNext=function(){return o},i.setNext=function(e){o=e},i.processTelemetry=function(n,r){var e=a?a.identifier:"TelemetryPluginChain";Ue((r=r||t)?r.core():null,function(){return e+":processTelemetry"},function(){if(a&&s){i._hasRun=!0;try{r.setNext(o),u&&a.setNextPlugin(o),o&&(o._hasRun=!1),a.processTelemetry(n,r)}catch(t){var e=o&&o._hasRun;o&&e||r.diagLog().throwInternal(_.CRITICAL,X.PluginException,"Plugin ["+a.identifier+"] failed during processTelemetry - "+t),o&&!e&&o.processTelemetry(n,r)}}else o&&(i._hasRun=!0,o.processTelemetry(n,r))},function(){return{item:n}},!n.sync)}};function He(e,t){var n=[];if(e&&0<e.length)for(var r=null,a=0;a<e.length;a++){var i=e[a];i&&te(i.processTelemetry)&&(i=new Oe(i,t),n.push(i),r&&r.setNext(i),r=i)}return 0<n.length?n[0]:null}var Ke=function dr(e,a,n,t){var r,i,o,s,u=this,l=null;null!==t&&(e&&te(e.getPlugin)?l=function(e,t,n){var r=[],a=!n;if(e)for(;e;){var i=e.getPlugin();!a&&i!==n||(a=!0,r.push(i)),e=e.getNext()}return a||r.push(n),He(r,t)}(e,u,t||e.getPlugin()):t?(r=u,o=e,s=!1,(i=t)&&e&&(o=[],ce(e,function(e){!s&&e!==i||(s=!0,o.push(e))})),i&&!s&&(o=o||[]).push(i),l=He(o,r)):$(t)&&(l=He(e,u))),u.core=function(){return n},u.diagLog=function(){return Pe(n,a)},u.getCfg=function(){return a},u.getExtCfg=function(e,t){var n,r;return void 0===t&&(t={}),!a||(r=a.extensionConfig)&&e&&(n=r[e]),n||t},u.getConfig=function(e,t,n){var r;return void 0===n&&(n=!1),(e=u.getExtCfg(e,null))&&!Q(e[t])?r=e[t]:a&&!Q(a[t])&&(r=a[t]),Q(r)?n:r},u.hasNext=function(){return null!=l},u.getNext=function(){return l},u.setNext=function(e){l=e},u.processNext=function(e){var t=l;t&&(l=t.getNext(),t.processTelemetry(e,u))},u.createNew=function(e,t){return new dr((e=void 0===e?null:e)||l,a,n,t)}},Xe="getPlugin",je=(Ve.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},Ve);function Ve(){var i=this,o=!1,s=null,u=null;i.core=null,i.diagLog=function(e){return i._getTelCtx(e).diagLog()},i.isInitialized=function(){return o},i.setInitialized=function(e){o=e},i.setNextPlugin=function(e){u=e},i.processNext=function(e,t){t?t.processNext(e):u&&te(u.processTelemetry)&&u.processTelemetry(e,null)},i._getTelCtx=function(e){var t=e=void 0===e?null:e;return t||(e=s||new Ke(null,{},i.core),t=u&&u[Xe]?e.createNew(null,u[Xe]):e.createNew(null,u)),t},i._baseTelInit=function(e,t,n,r){e&&he(e,"extensionConfig",[],null,Q),!r&&t&&(r=t.getProcessTelContext().getNext());var a=u;u&&u[Xe]&&(a=u[Xe]()),i.core=t,s=new Ke(r,e,t,a),o=!0}}var We={Attach:ne,AttachEvent:ne,Detach:re,DetachEvent:re},Ye={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"},Je=(Ze.sanitizeKeyAndAddUniqueness=function(e,t,n){var r=t.length,a=Ze.sanitizeKey(e,t);if(a.length!==r){for(var i=0,o=a;n[o]!==undefined;)i++,o=a.substring(0,Ze.MAX_NAME_LENGTH-3)+Ze.padNumber(i);a=o}return a},Ze.sanitizeKey=function(e,t){var n;return t&&(t=Ze.trim(t.toString())).length>Ze.MAX_NAME_LENGTH&&(n=t.substring(0,Ze.MAX_NAME_LENGTH),e.throwInternal(_.WARNING,X.NameTooLong,"name is too long.  It has been truncated to "+Ze.MAX_NAME_LENGTH+" characters.",{name:t},!0)),n||t},Ze.sanitizeString=function(e,t,n){var r;return void 0===n&&(n=Ze.MAX_STRING_LENGTH),t&&(n=n||Ze.MAX_STRING_LENGTH,(t=Ze.trim(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(_.WARNING,X.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t},Ze.sanitizeUrl=function(e,t){return Ze.sanitizeInput(e,t,Ze.MAX_URL_LENGTH,X.UrlTooLong)},Ze.sanitizeMessage=function(e,t){var n;return t&&t.length>Ze.MAX_MESSAGE_LENGTH&&(n=t.substring(0,Ze.MAX_MESSAGE_LENGTH),e.throwInternal(_.WARNING,X.MessageTruncated,"message is too long, it has been truncated to "+Ze.MAX_MESSAGE_LENGTH+" characters.",{message:t},!0)),n||t},Ze.sanitizeException=function(e,t){var n;return t&&t.length>Ze.MAX_EXCEPTION_LENGTH&&(n=t.substring(0,Ze.MAX_EXCEPTION_LENGTH),e.throwInternal(_.WARNING,X.ExceptionTruncated,"exception is too long, it has been truncated to "+Ze.MAX_EXCEPTION_LENGTH+" characters.",{exception:t},!0)),n||t},Ze.sanitizeProperties=function(r,e){var a;return e&&(a={},ae(e,function(e,t){if(ee(t)&&xe())try{t=be().stringify(t)}catch(n){r.throwInternal(_.WARNING,X.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:n},!0)}t=Ze.sanitizeString(r,t,Ze.MAX_PROPERTY_LENGTH),e=Ze.sanitizeKeyAndAddUniqueness(r,e,a),a[e]=t}),e=a),e},Ze.sanitizeMeasurements=function(n,e){var r;return e&&(r={},ae(e,function(e,t){e=Ze.sanitizeKeyAndAddUniqueness(n,e,r),r[e]=t}),e=r),e},Ze.sanitizeId=function(e,t){return t&&Ze.sanitizeInput(e,t,Ze.MAX_ID_LENGTH,X.IdTooLong).toString()},Ze.sanitizeInput=function(e,t,n,r){var a;return t&&(t=Ze.trim(t)).length>n&&(a=t.substring(0,n),e.throwInternal(_.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),a||t},Ze.padNumber=function(e){return(e="00"+e).substr(e.length-3)},Ze.trim=function(e){return ue(e)?e.replace(/^\s+|\s+$/g,""):e},Ze.MAX_NAME_LENGTH=150,Ze.MAX_ID_LENGTH=128,Ze.MAX_PROPERTY_LENGTH=8192,Ze.MAX_STRING_LENGTH=1024,Ze.MAX_URL_LENGTH=2048,Ze.MAX_MESSAGE_LENGTH=32768,Ze.MAX_EXCEPTION_LENGTH=32768,Ze);function Ze(){}function $e(e){var t=""+(e=Math.round(e=isNaN(e)||e<0?0:e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,a=""+Math.floor(e/36e5)%24,t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r;return(0<(e=Math.floor(e/864e5))?e+".":"")+(a=a.length<2?"0"+a:a)+":"+r+":"+n+"."+t}function Qe(){var e=Ne();return"sendBeacon"in e&&e.sendBeacon}var et,tt,nt="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",rt="sampleRate",at="ProcessLegacy",it="http.method",ot="not_specified";(mn=et=et||{})[mn.LocalStorage=0]="LocalStorage",mn[mn.SessionStorage=1]="SessionStorage",(jt=tt=tt||{})[jt.Default=0]="Default",jt[jt.Required=1]="Required",jt[jt.Array=2]="Array",jt[jt.Hidden=4]="Hidden",(an={})[an.AI=0]="AI",an[an.AI_AND_W3C=1]="AI_AND_W3C",an[an.W3C=2]="W3C";var st=undefined;function ut(e){try{if(Q(f()))return null;var t=new Date,n=Ae(e===et.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(a){}return null}function lt(){return ct()?ut(et.SessionStorage):null}function ct(){return st=st===undefined?!!ut(et.SessionStorage):st}function dt(e,t){var n=lt();if(null!==n)try{return n.getItem(t)}catch(r){st=!1,e.throwInternal(_.WARNING,X.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+ge(r),{exception:Le(r)})}return null}function ft(e,t,n){var r=lt();if(null!==r)try{return r.setItem(t,n),1}catch(a){st=!1,e.throwInternal(_.WARNING,X.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+ge(a),{exception:Le(a)})}}var pt,gt=Ee()||{},ht=0,mt=[null,null,null,null,null],vt=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],yt=(m(It,pt=function(){}),It);function It(){return pt.call(this)||this}var Ct,St=(m(Tt,Ct=function(){this.ver=1,this.sampleRate=100,this.tags={}}),Tt);function Tt(e,t,n){var r=Ct.call(this)||this;return r.name=Je.sanitizeString(e,n)||ot,r.data=t,r.time=le(new Date),r.aiDataContract={time:tt.Required,iKey:tt.Required,name:tt.Required,sampleRate:function(){return 100===r.sampleRate?tt.Hidden:tt.Required},tags:tt.Required,data:tt.Required},r}var _t,At=(m(wt,_t=vn=function(){this.ver=2,this.properties={},this.measurements={}}),wt.envelopeType="Microsoft.ApplicationInsights.{0}.Event",wt.dataType="EventData",wt);function wt(e,t,n,r){var a=_t.call(this)||this;return a.aiDataContract={ver:tt.Required,name:tt.Required,properties:tt.Default,measurements:tt.Default},a.name=Je.sanitizeString(e,t)||ot,a.properties=Je.sanitizeProperties(e,n),a.measurements=Je.sanitizeMeasurements(e,r),a}var Rt,Et=function(){},Nt=function(){this.hasFullStack=!0,this.parsedStack=[]},xt="error",bt=(m(Lt,Rt=function(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}),Lt.CreateFromInterface=function(t,e,n,r){var a=e.exceptions&&de(e.exceptions,function(e){return Mt.CreateFromInterface(t,e)});return new Lt(t,g({},e,{exceptions:a}),n,r)},Lt.prototype.toInterface=function(){var e=this.exceptions,t=this.properties,n=this.measurements,r=this.severityLevel;this.ver;var a=this.problemGroup,i=this.id,o=this.isManual;return{ver:"4.0",exceptions:e instanceof Array&&de(e,function(e){return e.toInterface()})||undefined,severityLevel:r,properties:t,measurements:n,problemGroup:a,id:i,isManual:o}},Lt.CreateSimpleException=function(e,t,n,r,a,i){return{exceptions:[{hasFullStack:!0,message:e,stack:a,typeName:t}]}},Lt.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",Lt.dataType="ExceptionData",Lt);function Lt(e,t,n,r,a,i){var o,s=Rt.call(this)||this;return s.aiDataContract={ver:tt.Required,exceptions:tt.Required,severityLevel:tt.Default,properties:tt.Default,measurements:tt.Default},"ver"in(o=t)&&"exceptions"in o&&"properties"in o?(s.exceptions=t.exceptions,s.properties=t.properties,s.measurements=t.measurements,t.severityLevel&&(s.severityLevel=t.severityLevel),t.id&&(s.id=t.id),t.problemGroup&&(s.problemGroup=t.problemGroup),s.ver=2,Q(t.isManual)||(s.isManual=t.isManual)):(s.exceptions=[new Mt(e,t)],s.properties=Je.sanitizeProperties(e,n)||{},s.measurements=Je.sanitizeMeasurements(e,r),a&&(s.severityLevel=a),i&&(s.id=i)),s}var Dt,Mt=(m(Ft,Dt=Nt),Ft.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&de(this.parsedStack,function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||undefined}},Ft.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&de(t.parsedStack,function(e){return kt.CreateFromInterface(e)})||t.parsedStack;return new Ft(e,g({},t,{parsedStack:n}))},Ft.parseStack=function(e){if(ue(e)){for(var t=e.split("\n"),n=[],r=0,a=0,i=0;i<=t.length;i++){var o=t[i];kt.regex.test(o)&&(a+=(o=new kt(t[i],r++)).sizeInBytes,n.push(o))}if(32768<a)for(var s=0,u=n.length-1,l=0,c=s,d=u;s<u;){if(32768<(l+=n[s].sizeInBytes+n[u].sizeInBytes)){n.splice(c,d-c+1);break}c=s,d=u,s++,u--}}return n},Ft);function Ft(e,t){var n,r=Dt.call(this)||this;return r.aiDataContract={id:tt.Default,outerId:tt.Default,typeName:tt.Required,message:tt.Required,hasFullStack:tt.Default,stack:tt.Default,parsedStack:tt.Array},"hasFullStack"in(n=t)&&"typeName"in n?(r.typeName=t.typeName,r.message=t.message,r.stack=t.stack,r.parsedStack=t.parsedStack,r.hasFullStack=t.hasFullStack):(se(n=t)||(n=n[xt]||n.evt||n),r.typeName=Je.sanitizeString(e,function(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,})\(/.exec(e.constructor.toString()),t=n&&1<n.length?n[1]:""}catch(r){}return t}(n))||ot,r.message=Je.sanitizeMessage(e,t.message)||ot,t=t.stack,r.parsedStack=Ft.parseStack(t),r.stack=Je.sanitizeException(e,t),r.hasFullStack=oe(r.parsedStack)&&0<r.parsedStack.length),r}var Pt,kt=(m(zt,Pt=Et),zt.CreateFromInterface=function(e){return new zt(e,null)},zt.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},zt.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,zt.baseSize=58,zt);function zt(e,t){var n,r=Pt.call(this)||this;return r.sizeInBytes=0,r.aiDataContract={level:tt.Required,method:tt.Required,assembly:tt.Default,fileName:tt.Default,line:tt.Default},"string"==typeof e?(n=e,r.level=t,r.method="<no_method>",r.assembly=fe(n),r.fileName="",r.line=0,(n=n.match(zt.regex))&&5<=n.length&&(r.method=fe(n[2])||r.method,r.fileName=fe(n[4]),r.line=parseInt(n[5])||0)):(r.level=e.level,r.method=e.method,r.assembly=e.assembly,r.fileName=e.fileName,r.line=e.line,r.sizeInBytes=0),r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=zt.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}var Bt,c=function(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}};(mn=Bt={})[mn.Measurement=0]="Measurement",mn[mn.Aggregation=1]="Aggregation";var qt,Gt=(m(Ut,qt=function(){this.kind=Bt.Measurement}),Ut);function Ut(){var e=null!==qt&&qt.apply(this,arguments)||this;return e.aiDataContract={name:tt.Required,kind:tt.Default,value:tt.Required,count:tt.Default,min:tt.Default,max:tt.Default,stdDev:tt.Default},e}var Ot,Ht=(m(Kt,Ot=c),Kt.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",Kt.dataType="MetricData",Kt);function Kt(e,t,n,r,a,i,o,s){var u=Ot.call(this)||this;u.aiDataContract={ver:tt.Required,metrics:tt.Required,properties:tt.Default};var l=new Gt;return l.count=0<r?r:undefined,l.max=isNaN(i)||null===i?undefined:i,l.min=isNaN(a)||null===a?undefined:a,l.name=Je.sanitizeString(e,t)||ot,l.value=n,u.metrics=[l],u.properties=Je.sanitizeProperties(e,o),u.measurements=Je.sanitizeMeasurements(e,s),u}var Xt,jt=(m(Vt,Xt=vn),Vt);function Vt(){var e=Xt.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Wt,Yt=(m(Jt,Wt=jt),Jt.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",Jt.dataType="PageviewData",Jt);function Jt(e,t,n,r,a,i,o){var s=Wt.call(this)||this;return s.aiDataContract={ver:tt.Required,name:tt.Default,url:tt.Default,duration:tt.Default,properties:tt.Default,measurements:tt.Default,id:tt.Default},s.id=Je.sanitizeId(e,o),s.url=Je.sanitizeUrl(e,n),s.name=Je.sanitizeString(e,t)||ot,isNaN(r)||(s.duration=$e(r)),s.properties=Je.sanitizeProperties(e,a),s.measurements=Je.sanitizeMeasurements(e,i),s}var Zt,$t=(m(Qt,Zt=function(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}),Qt.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Qt.dataType="RemoteDependencyData",Qt);function Qt(e,t,n,r,a,i,o,s,u,l,c,d){void 0===u&&(u="Ajax");var f=Zt.call(this)||this;f.aiDataContract={id:tt.Required,ver:tt.Required,name:tt.Default,resultCode:tt.Default,duration:tt.Default,success:tt.Default,data:tt.Default,target:tt.Default,type:tt.Default,properties:tt.Default,measurements:tt.Default,kind:tt.Default,value:tt.Default,count:tt.Default,min:tt.Default,max:tt.Default,stdDev:tt.Default,dependencyKind:tt.Default,dependencySource:tt.Default,commandName:tt.Default,dependencyTypeName:tt.Default},f.id=t,f.duration=$e(a),f.success=i,f.resultCode=o+"",f.type=Je.sanitizeString(e,u);var p,g,h,m,v,y,I,C,S,T,o=(p=e,t=s,o=i=a=r,i=(u=n)&&0<u.length?(g=u,T=(S=mt)[C=ht],gt.createElement?S[C]||(T=S[C]=gt.createElement("a")):T={host:(y=!0,I=null,!(v=h=g)||null!=(v=v.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<v.length&&ue(v[2])&&0<v[2].length&&(I=v[2]||"",y&&2<v.length&&(y=(v[1]||"").toLowerCase(),v=v[3]||"",I+=v="http"==y&&":80"===v||"https"==y&&":443"===v?"":v)),(h=I)&&null!=(m=h.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i))&&3<m.length&&ue(m[2])&&0<m[2].length?m[2]+(m[3]||""):h)},T.href=g,++C>=S.length&&(C=0),ht=C,T=(s=T).host,i||(null!=s.pathname?("/"!=((n=0===s.pathname.length?"/":s.pathname)[0]||"")&&(n="/"+n),o=s.pathname,Je.sanitizeString(p,t?t+" "+n:n)):Je.sanitizeString(p,u))):T=a,{target:T,name:i,data:o});return f.data=Je.sanitizeUrl(e,r)||o.data,f.target=Je.sanitizeString(e,o.target),l&&(f.target=f.target+" | "+l),f.name=Je.sanitizeString(e,o.name),f.properties=Je.sanitizeProperties(e,c),f.measurements=Je.sanitizeMeasurements(e,d),f}var en,tn=(m(nn,en=function(){this.ver=2,this.properties={},this.measurements={}}),nn.envelopeType="Microsoft.ApplicationInsights.{0}.Message",nn.dataType="MessageData",nn);function nn(e,t,n,r,a){var i=en.call(this)||this;return i.aiDataContract={ver:tt.Required,message:tt.Required,severityLevel:tt.Default,properties:tt.Default},i.message=Je.sanitizeMessage(e,t=t||ot),i.properties=Je.sanitizeProperties(e,r),i.measurements=Je.sanitizeMeasurements(e,a),n&&(i.severityLevel=n),i}var rn,an=(m(on,rn=jt),on);function on(){var e=rn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var sn,un=(m(ln,sn=an),ln.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",ln.dataType="PageviewPerformanceData",ln);function ln(e,t,n,r,a,i,o){var s=sn.call(this)||this;return s.aiDataContract={ver:tt.Required,name:tt.Default,url:tt.Default,duration:tt.Default,perfTotal:tt.Default,networkConnect:tt.Default,sentRequest:tt.Default,receivedResponse:tt.Default,domProcessing:tt.Default,properties:tt.Default,measurements:tt.Default},s.url=Je.sanitizeUrl(e,n),s.name=Je.sanitizeString(e,t)||ot,s.properties=Je.sanitizeProperties(e,a),s.measurements=Je.sanitizeMeasurements(e,i),o&&(s.domProcessing=o.domProcessing,s.duration=o.duration,s.networkConnect=o.networkConnect,s.perfTotal=o.perfTotal,s.receivedResponse=o.receivedResponse,s.sentRequest=o.sentRequest),s}var cn,dn=(m(fn,cn=yt),fn);function fn(e,t){var n=cn.call(this)||this;return n.aiDataContract={baseType:tt.Required,baseData:tt.Required},n.baseType=e,n.baseData=t,n}function pn(e){var t="ai."+e+".";return function(e){return t+e}}var gn,hn,Nt=pn("application"),Et=pn("device"),mn=pn("location"),c=pn("operation"),vn=pn("session"),jt=pn("user"),an=pn("cloud"),yt=pn("internal"),yn=(hn={applicationVersion:Nt("ver"),applicationBuild:Nt("build"),applicationTypeId:Nt("typeId"),applicationId:Nt("applicationId"),applicationLayer:Nt("layer"),deviceId:Et("id"),deviceIp:Et("ip"),deviceLanguage:Et("language"),deviceLocale:Et("locale"),deviceModel:Et("model"),deviceFriendlyName:Et("friendlyName"),deviceNetwork:Et("network"),deviceNetworkName:Et("networkName"),deviceOEMName:Et("oemName"),deviceOS:Et("os"),deviceOSVersion:Et("osVersion"),deviceRoleInstance:Et("roleInstance"),deviceRoleName:Et("roleName"),deviceScreenResolution:Et("screenResolution"),deviceType:Et("type"),deviceMachineName:Et("machineName"),deviceVMName:Et("vmName"),deviceBrowser:Et("browser"),deviceBrowserVersion:Et("browserVersion"),locationIp:mn("ip"),locationCountry:mn("country"),locationProvince:mn("province"),locationCity:mn("city"),operationId:c("id"),operationName:c("name"),operationParentId:c("parentId"),operationRootId:c("rootId"),operationSyntheticSource:c("syntheticSource"),operationCorrelationVector:c("correlationVector"),sessionId:vn("id"),sessionIsFirst:vn("isFirst"),sessionIsNew:vn("isNew"),userAccountAcquisitionDate:jt("accountAcquisitionDate"),userAccountId:jt("accountId"),userAgent:jt("userAgent"),userId:jt("id"),userStoreRegion:jt("storeRegion"),userAuthUserId:jt("authUserId"),userAnonymousUserAcquisitionDate:jt("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:jt("authUserAcquisitionDate"),cloudName:an("name"),cloudRole:an("role"),cloudRoleVer:an("roleVer"),cloudRoleInstance:an("roleInstance"),cloudEnvironment:an("environment"),cloudLocation:an("location"),cloudDeploymentUnit:an("deploymentUnit"),internalNodeName:yt("nodeName"),internalSdkVersion:yt("sdkVersion"),internalAgentVersion:yt("agentVersion"),internalSnippet:yt("snippet"),internalSdkSrc:yt("sdkSrc")},m(In,gn=function(){var n=this;ae(hn,function(e,t){n[e]=t})}),In);function In(){return gn.call(this)||this}var Cn=new yn,Sn="AppInsightsChannelPlugin",Tn=function fr(n){var r=[];K(fr,this,function(t){t.enqueue=function(e){r.push(e)},t.count=function(){return r.length},t.clear=function(){r.length=0},t.getItems=function(){return r.slice(0)},t.batchPayloads=function(e){return e&&0<e.length?n.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},t.markAsSent=function(e){t.clear()},t.clearSent=function(e){}})},_n=(An.BUFFER_KEY="AI_buffer",An.SENT_BUFFER_KEY="AI_sentBuffer",An.MAX_BUFFER_SIZE=2e3,An);function An(o,s){var u,l=!1;K(An,this,function(e){var t=a(An.BUFFER_KEY),n=a(An.SENT_BUFFER_KEY);function r(t,e){var n=[];return ce(e,function(e){te(e)||-1!==function(e,t){for(var n=e.length,r=0;r<n;r++)if(r in e&&e[r]===t)return r;return-1}(t,e)||n.push(e)}),n}function a(e){try{var e=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+e:e,t=dt(o,e);if(t){var n=be().parse(t);if((n=ue(n)?be().parse(n):n)&&oe(n))return n}}catch(r){o.throwInternal(_.CRITICAL,X.FailedToRestoreStorageBuffer," storage key: "+e+", "+ge(r),{exception:Le(r)})}return[]}function i(e,t){try{var e=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+e:e,n=JSON.stringify(t);ft(o,e,n)}catch(r){ft(o,e,JSON.stringify([])),o.throwInternal(_.WARNING,X.FailedToSetStorageBuffer," storage key: "+e+", "+ge(r)+". Buffer cleared",{exception:Le(r)})}}(u=t.concat(n)).length>An.MAX_BUFFER_SIZE&&(u.length=An.MAX_BUFFER_SIZE),i(An.SENT_BUFFER_KEY,[]),i(An.BUFFER_KEY,u),e.enqueue=function(e){u.length>=An.MAX_BUFFER_SIZE?l||(o.throwInternal(_.WARNING,X.SessionStorageBufferFull,"Maximum buffer size reached: "+u.length,!0),l=!0):(u.push(e),i(An.BUFFER_KEY,u))},e.count=function(){return u.length},e.clear=function(){u=[],i(An.BUFFER_KEY,[]),i(An.SENT_BUFFER_KEY,[]),l=!1},e.getItems=function(){return u.slice(0)},e.batchPayloads=function(e){return e&&0<e.length?s.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(e){u=r(e,u),i(An.BUFFER_KEY,u);var t=a(An.SENT_BUFFER_KEY);t instanceof Array&&e instanceof Array&&((t=t.concat(e)).length>An.MAX_BUFFER_SIZE&&(o.throwInternal(_.CRITICAL,X.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+t.length,!0),t.length=An.MAX_BUFFER_SIZE),i(An.SENT_BUFFER_KEY,t))},e.clearSent=function(e){e=r(e,e=a(An.SENT_BUFFER_KEY)),i(An.SENT_BUFFER_KEY,e)}})}var wn="baseType",Rn="baseData",En="properties";function Nn(e,t,n){return he(e,t,n,me)}var xn=(bn.extractPropsAndMeasurements=function(e,n,r){Q(e)||ae(e,function(e,t){"number"==typeof t?r[e]=t:ue(t)?n[e]=t:xe()&&(n[e]=be().stringify(t))})},bn.createEnvelope=function(e,t,n,r){return Nn(r=new St(e,r,t),"sampleRate",n[rt]),(n[Rn]||{}).startTime&&(r.time=le(n[Rn].startTime)),r.iKey=n.iKey,t=n.iKey.replace(/-/g,""),r.name=r.name.replace("{0}",t),bn.extractPartAExtensions(n,r),n.tags=n.tags||[],ve(r)},bn.extractPartAExtensions=function(e,t){var n=t.tags=t.tags||{},r=e.ext=e.ext||{},a=e.tags=e.tags||[],i=r.user;i&&(Nn(n,Cn.userAuthUserId,i.authId),Nn(n,Cn.userId,i.id||i.localId)),(i=r.app)&&Nn(n,Cn.sessionId,i.sesId),(i=r.device)&&(Nn(n,Cn.deviceId,i.id||i.localId),Nn(n,Cn.deviceType,i.deviceClass),Nn(n,Cn.deviceIp,i.ip),Nn(n,Cn.deviceModel,i.model),Nn(n,Cn.deviceType,i.deviceType)),(i=e.ext.web)&&(Nn(n,Cn.deviceLanguage,i.browserLang),Nn(n,Cn.deviceBrowserVersion,i.browserVer),Nn(n,Cn.deviceBrowser,i.browser),Nn(e=(e=(e=t.data=t.data||{})[Rn]=e[Rn]||{})[En]=e[En]||{},"domain",i.domain),Nn(e,"isManual",i.isManual?"true":null),Nn(e,"screenRes",i.screenRes),Nn(e,"userConsent",i.userConsent?"true":null)),(i=r.os)&&Nn(n,Cn.deviceOS,i.name),(r=r.trace)&&(Nn(n,Cn.operationParentId,r.parentID),Nn(n,Cn.operationName,r.name),Nn(n,Cn.operationId,r.traceID));for(var o={},s=a.length-1;0<=s;s--)ae(a[s],function(e,t){o[e]=t}),a.splice(s,1);ae(a,function(e,t){o[e]=t}),(n=g({},n,o))[Cn.internalSdkVersion]||(n[Cn.internalSdkVersion]="javascript:"+bn.Version),t.tags=ve(n)},bn.prototype.Init=function(e,t){this._logger=e,Q(t[Rn])&&this._logger.throwInternal(_.CRITICAL,X.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},bn.Version="2.6.2",bn);function bn(){}var Ln,Dn=(m(Mn,Ln=xn),Mn.prototype.Create=function(e,t){Ln.prototype.Init.call(this,e,t);var n=t[Rn].measurements||{},r=t[Rn][En]||{};xn.extractPropsAndMeasurements(t.data,r,n);var a=t[Rn];if(Q(a))return e.warnToConsole("Invalid input for dependency data"),null;var i=a[En]&&a[En][it]?a[En][it]:"GET",n=new $t(e,a.id,a.target,a.name,a.duration,a.success,a.responseCode,i,a.type,a.correlationContext,r,n),n=new dn($t.dataType,n);return xn.createEnvelope(e,$t.envelopeType,t,n)},Mn.DependencyEnvelopeCreator=new Mn,Mn);function Mn(){return null!==Ln&&Ln.apply(this,arguments)||this}var Fn,Pn=(m(kn,Fn=xn),kn.prototype.Create=function(e,t){Fn.prototype.Init.call(this,e,t);var n={},r={};t[wn]!==At.dataType&&(n.baseTypeSource=t[wn]),t[wn]===At.dataType?(n=t[Rn][En]||{},r=t[Rn].measurements||{}):t[Rn]&&xn.extractPropsAndMeasurements(t[Rn],n,r),xn.extractPropsAndMeasurements(t.data,n,r);var a=t[Rn].name,r=new At(e,a,n,r),r=new dn(At.dataType,r);return xn.createEnvelope(e,At.envelopeType,t,r)},kn.EventEnvelopeCreator=new kn,kn);function kn(){return null!==Fn&&Fn.apply(this,arguments)||this}var zn,Bn=(m(qn,zn=xn),qn.prototype.Create=function(e,t){zn.prototype.Init.call(this,e,t);var n=t[Rn].measurements||{},r=t[Rn][En]||{};xn.extractPropsAndMeasurements(t.data,r,n);var a=t[Rn],n=bt.CreateFromInterface(e,a,r,n),n=new dn(bt.dataType,n);return xn.createEnvelope(e,bt.envelopeType,t,n)},qn.ExceptionEnvelopeCreator=new qn,qn);function qn(){return null!==zn&&zn.apply(this,arguments)||this}var Gn,Un=(m(On,Gn=xn),On.prototype.Create=function(e,t){Gn.prototype.Init.call(this,e,t);var n=t[Rn],r=n[En]||{},a=n.measurements||{};return xn.extractPropsAndMeasurements(t.data,r,a),a=new Ht(e,n.name,n.average,n.sampleCount,n.min,n.max,r,a),a=new dn(Ht.dataType,a),xn.createEnvelope(e,Ht.envelopeType,t,a)},On.MetricEnvelopeCreator=new On,On);function On(){return null!==Gn&&Gn.apply(this,arguments)||this}var Hn,Kn=(m(Xn,Hn=xn),Xn.prototype.Create=function(e,t){Hn.prototype.Init.call(this,e,t);var n,r="duration";Q(o=t[Rn])||Q(o[En])||Q(o[En][r])?Q(t.data)||Q(t.data[r])||(n=t.data[r],delete t.data[r]):(n=o[En][r],delete o[En][r]);var a=t[Rn];((t.ext||{}).trace||{}).traceID&&(u=t.ext.trace.traceID);var i=a.id||u,o=a.name,r=a.uri,s=a[En]||{},u=a.measurements||{};return Q(a.refUri)||(s.refUri=a.refUri),Q(a.pageType)||(s.pageType=a.pageType),Q(a.isLoggedIn)||(s.isLoggedIn=a.isLoggedIn.toString()),Q(a[En])||ae(a[En],function(e,t){s[e]=t}),xn.extractPropsAndMeasurements(t.data,s,u),i=new Yt(e,o,r,n,s,u,i),i=new dn(Yt.dataType,i),xn.createEnvelope(e,Yt.envelopeType,t,i)},Xn.PageViewEnvelopeCreator=new Xn,Xn);function Xn(){return null!==Hn&&Hn.apply(this,arguments)||this}var jn,Vn=(m(Wn,jn=xn),Wn.prototype.Create=function(e,t){jn.prototype.Init.call(this,e,t);var n=t[Rn],r=n.name,a=n.uri||n.url,i=n[En]||{},o=n.measurements||{};return xn.extractPropsAndMeasurements(t.data,i,o),n=new un(e,r,a,undefined,i,o,n),n=new dn(un.dataType,n),xn.createEnvelope(e,un.envelopeType,t,n)},Wn.PageViewPerformanceEnvelopeCreator=new Wn,Wn);function Wn(){return null!==jn&&jn.apply(this,arguments)||this}var Yn,Jn=(m(Zn,Yn=xn),Zn.prototype.Create=function(e,t){Yn.prototype.Init.call(this,e,t);var n=t[Rn].message,r=t[Rn].severityLevel,a=t[Rn][En]||{},i=t[Rn].measurements||{};return xn.extractPropsAndMeasurements(t.data,a,i),i=new tn(e,n,r,a,i),i=new dn(tn.dataType,i),xn.createEnvelope(e,tn.envelopeType,t,i)},Zn.TraceEnvelopeCreator=new Zn,Zn);function Zn(){return null!==Yn&&Yn.apply(this,arguments)||this}var $n=function pr(d){K(pr,this,function(e){function l(o,s){var e="__aiCircularRefCheck",u={};if(!o)return d.throwInternal(_.CRITICAL,X.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:s},!0),u;if(o[e])return d.throwInternal(_.WARNING,X.CircularReferenceDetected,"Circular reference detected while serializing object",{name:s},!0),u;if(o.aiDataContract)return o[e]=!0,ae(o.aiDataContract,function(e,t){var n=te(t)?t()&tt.Required:t&tt.Required,r=te(t)?t()&tt.Hidden:t&tt.Hidden,a=t&tt.Array,i=o[e]!==undefined,t=ee(o[e])&&null!==o[e];!n||i||a?r||(r=void 0,(r=t?(a?c:l)(o[e],e):o[e])!==undefined&&(u[e]=r)):d.throwInternal(_.CRITICAL,X.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:e,name:s})}),delete o[e],u;if("measurements"===s)u=n(o,"number",s);else if("properties"===s)u=n(o,"string",s);else if("tags"===s)u=n(o,"string",s);else if(oe(o))u=c(o,s);else{d.throwInternal(_.WARNING,X.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:s},!0);try{be().stringify(o),u=o}catch(t){d.throwInternal(_.CRITICAL,X.CannotSerializeObject,t&&te(t.toString)?t.toString():"Error serializing object",null,!0)}}return u}function c(e,t){if(e)if(oe(e))for(var n=[],r=0;r<e.length;r++){var a=l(e[r],t+"["+r+"]");n.push(a)}else d.throwInternal(_.CRITICAL,X.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n}function n(e,n,r){var a;return e&&(a={},ae(e,function(e,t){"string"===n?t===undefined?a[e]="undefined":null===t?a[e]="null":t.toString?a[e]=t.toString():a[e]="invalid field: toString() is not defined.":"number"===n?t===undefined?a[e]="undefined":a[e]=null===t?"null":isNaN(t=parseFloat(t))?"NaN":t:(a[e]="invalid field: "+r+" is of unknown type.",d.throwInternal(_.CRITICAL,a[e],null,!0))})),a}e.serialize=function(e){e=l(e,"root");try{return be().stringify(e)}catch(t){d.throwInternal(_.CRITICAL,X.CannotSerializeObject,t&&te(t.toString)?t.toString():"Error serializing object",null,!0)}}})};function Qn(){var o=Re(),s=Ee(),u=!1,l=!0;K(Qn,this,function(e){try{var t,n;o&&We.Attach(o,"online",r)&&(We.Attach(o,"offline",a),u=!0),s&&($((t=s.body||s).ononline)||(t.ononline=r,t.onoffline=a,u=!0)),!u||(n=Ne())&&!Q(n.onLine)&&(l=n.onLine)}catch(i){u=!1}function r(){l=!0}function a(){l=!1}e.isListening=u,e.isOnline=function(){var e=!0,t=Ne();return u?e=l:t&&!Q(t.onLine)&&(e=t.onLine),e},e.isOffline=function(){return!e.isOnline()}})}var er=Qn.Offline=new Qn,tr=(nr.prototype.getHashCodeScore=function(e){return this.getHashCode(e)/nr.INT_MAX_VALUE*100},nr.prototype.getHashCode=function(e){if(""===e)return 0;for(;e.length<nr.MIN_INPUT_LENGTH;)e=e.concat(e);for(var t=5381,n=0;n<e.length;++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},nr.INT_MAX_VALUE=2147483647,nr.MIN_INPUT_LENGTH=8,nr);function nr(){}var rr=(ar.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},ar);function ar(){this.hashCodeGeneragor=new tr,this.keys=new yn}var ir=(or.prototype.isSampledIn=function(e){var t=this.sampleRate;return null===t||t===undefined||100<=t||e.baseType===Ht.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},or);function or(e,t){this.INT_MAX_VALUE=2147483647,this._logger=t||Pe(null),(100<e||e<0)&&(this._logger.throwInternal(_.WARNING,X.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),this.sampleRate=100),this.sampleRate=e,this.samplingScoreGenerator=new rr}function sr(e){try{return e.responseText}catch(t){}return null}var ur,je=(m(lr,ur=je),lr.constructEnvelope=function(e,t,n){var r=t===e.iKey||Q(t)?e:g({},e,{iKey:t});switch(r.baseType){case At.dataType:return Pn.EventEnvelopeCreator.Create(n,r);case tn.dataType:return Jn.TraceEnvelopeCreator.Create(n,r);case Yt.dataType:return Kn.PageViewEnvelopeCreator.Create(n,r);case un.dataType:return Vn.PageViewPerformanceEnvelopeCreator.Create(n,r);case bt.dataType:return Bn.ExceptionEnvelopeCreator.Create(n,r);case Ht.dataType:return Un.MetricEnvelopeCreator.Create(n,r);case $t.dataType:return Dn.DependencyEnvelopeCreator.Create(n,r);default:return Pn.EventEnvelopeCreator.Create(n,r)}},lr._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){return undefined},namePrefix:function(){return undefined},samplingPercentage:function(){return 100}}},lr._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:undefined,emitLineDelimitedJson:undefined,maxBatchInterval:undefined,maxBatchSizeInBytes:undefined,disableTelemetry:undefined,enableSessionStorageBuffer:undefined,isRetryDisabled:undefined,isBeaconApiDisabled:undefined,onunloadDisableBeacon:undefined,instrumentationKey:undefined,namePrefix:undefined,samplingPercentage:undefined}},lr);function lr(){var v,y,I,C,S,T=ur.call(this)||this;return T.priority=1001,T.identifier=Sn,T._XMLHttpRequestSupported=!1,K(lr,T,function(u,o){function e(){!function(){throw Error("Method not implemented.")}()}function a(e){var t=e.responseURL;return!(10<=S)&&!Q(t)&&""!==t&&t!==u._senderConfig.endpointUrl()&&(u._senderConfig.endpointUrl=function(){return t},++S,1)}function s(e,t){var n=u._senderConfig.endpointUrl(),r=u._buffer.batchPayloads(e),r=new Blob([r],{type:"text/plain;charset=UTF-8"});Ne().sendBeacon(n,r)?(u._buffer.markAsSent(e),u._onSuccess(e,e.length)):(l(e,!0),u.diagLog().throwInternal(_.WARNING,X.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function l(t,e){var n=new XMLHttpRequest,r=u._senderConfig.endpointUrl();try{n[nt]=!0}catch(a){}n.open("POST",r,e),n.setRequestHeader("Content-type","application/json"),~vt.indexOf(r.toLowerCase())&&n.setRequestHeader(Ye.sdkContextHeader,Ye.sdkContextHeaderAppIdRequest),n.onreadystatechange=function(){return u._xhrReadyStateChange(n,t,t.length)},n.onerror=function(e){return u._onError(t,p(n),e)},r=u._buffer.batchPayloads(t),n.send(r),u._buffer.markAsSent(t)}function i(e){try{if(e&&""!==e){var t=be().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(n){u.diagLog().throwInternal(_.CRITICAL,X.InvalidBackendResponse,"Cannot parse the response. "+ge(n),{response:e})}return null}function c(e,t){if(void 0===t&&(t=1),e&&0!==e.length){u._buffer.clearSent(e),v++;for(var n=0,r=e;n<r.length;n++){var a=r[n];u._buffer.enqueue(a)}i=v<=1?10:(i=(Math.pow(2,v)-1)/2,i=1+Math.floor(Math.random()*i*10),Math.max(Math.min(i*=t,3600),10)),i=pe()+1e3*i,y=i,d()}var i}function d(){var e;I||(e=y?Math.max(0,y-pe()):0,e=Math.max(u._senderConfig.maxBatchInterval(),e),I=setTimeout(function(){u.triggerSend(!0,null,1)},e))}function f(e){return 408===e||429===e||500===e||503===e}function p(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+sr(e)||e.response||"":t}function g(t,e){var n=Re(),r=new XDomainRequest;if(r.onload=function(){return u._xdrOnLoad(r,t)},r.onerror=function(e){return u._onError(t,h(r),e)},n=n&&n.location&&n.location.protocol||"",u._senderConfig.endpointUrl().lastIndexOf(n,0))return u.diagLog().throwInternal(_.WARNING,X.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void u._buffer.clear();n=u._senderConfig.endpointUrl().replace(/^(https?:)/,""),r.open("POST",n),n=u._buffer.batchPayloads(t),r.send(n),u._buffer.markAsSent(t)}function h(e,t){return e?"XDomainRequest,Response:"+sr(e)||"":t}function m(e,t){var n=u.core[n="getNotifyMgr"]?u.core[n]():u.core._notificationManager;if(n&&n.eventsSendRequest)try{n.eventsSendRequest(e,t)}catch(r){u.diagLog().throwInternal(_.CRITICAL,X.NotificationException,"send request notification failed: "+ge(r),{exception:Le(r)})}}u.pause=e,u.resume=e,u.flush=function(){try{u.triggerSend(!0,null,1)}catch(e){u.diagLog().throwInternal(_.CRITICAL,X.FlushFailed,"flush failed, telemetry will not be collected: "+ge(e),{exception:Le(e)})}},u.onunloadFlush=function(){if(!1!==u._senderConfig.onunloadDisableBeacon()&&!1!==u._senderConfig.isBeaconApiDisabled()||!Qe())u.flush();else try{u.triggerSend(!0,s,2)}catch(e){u.diagLog().throwInternal(_.CRITICAL,X.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ge(e),{exception:Le(e)})}},u.teardown=e,u.initialize=function(e,t,n,r){o.initialize(e,t,n,r);var a=u._getTelCtx(),i=u.identifier;C=new $n(t.logger),y=null,v=0,u._sender=null,S=0,t=lr._getDefaultAppInsightsChannelConfig(),u._senderConfig=lr._getEmptyAppInsightsChannelConfig(),ae(t,function(e,t){u._senderConfig[e]=function(){return a.getConfig(i,e,t())}}),u._buffer=u._senderConfig.enableSessionStorageBuffer()&&ct()?new _n(u.diagLog(),u._senderConfig):new Tn(u._senderConfig),u._sample=new ir(u._senderConfig.samplingPercentage(),u.diagLog()),!Q(e.disableInstrumentationKeyValidation)&&e.disableInstrumentationKeyValidation||/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(e.instrumentationKey)||u.diagLog().throwInternal(_.CRITICAL,X.InvalidInstrumentationKey,"Invalid Instrumentation key "+e.instrumentationKey),!u._senderConfig.isBeaconApiDisabled()&&Qe()?u._sender=s:typeof XMLHttpRequest===undefined||(e=Ae("XMLHttpRequest"))&&("withCredentials"in new e?(u._sender=l,u._XMLHttpRequestSupported=!0):typeof XDomainRequest!==undefined&&(u._sender=g))},u.processTelemetry=function(e,n){n=u._getTelCtx(n);try{if(u._senderConfig.disableTelemetry())return;if(!e)return void n.diagLog().throwInternal(_.CRITICAL,X.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void n.diagLog().throwInternal(_.CRITICAL,X.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!u._sender)return void n.diagLog().throwInternal(_.CRITICAL,X.SenderNotInitialized,"Sender was not initialized");if(!u._sample.isSampledIn(e))return void n.diagLog().throwInternal(_.WARNING,X.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:u._sample.sampleRate});e[rt]=u._sample.sampleRate;var r=lr.constructEnvelope(e,u._senderConfig.instrumentationKey(),n.diagLog());if(!r)return void n.diagLog().throwInternal(_.CRITICAL,X.CreateEnvelopeError,"Unable to create an AppInsights envelope");var a=!1;if(e.tags&&e.tags[at]&&(ce(e.tags[at],function(e){try{e&&!1===e(r)&&(a=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(t){n.diagLog().throwInternal(_.CRITICAL,X.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+ge(t),{exception:Le(t)},!0)}}),delete e.tags[at]),a)return;var t=C.serialize(r),i=u._buffer.getItems(),o=u._buffer.batchPayloads(i);o&&o.length+t.length>u._senderConfig.maxBatchSizeInBytes()&&u.triggerSend(!0,null,10),u._buffer.enqueue(t),d()}catch(s){n.diagLog().throwInternal(_.WARNING,X.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ge(s),{exception:Le(s)})}u.processNext(e,n)},u._xhrReadyStateChange=function(e,t,n){var r;4===e.readyState&&(r=null,u._appId||(r=i(sr(e)||e.response))&&r.appId&&(u._appId=r.appId),(e.status<200||300<=e.status)&&0!==e.status?(301!=e.status&&308!=e.status||a(e))&&!u._senderConfig.isRetryDisabled()&&f(e.status)?(c(t),u.diagLog().throwInternal(_.WARNING,X.TransmissionFailed,". Response code "+e.status+". Will retry to send "+t.length+" items.")):u._onError(t,p(e)):er.isOffline()?u._senderConfig.isRetryDisabled()||(c(t,10),u.diagLog().throwInternal(_.WARNING,X.TransmissionFailed,". Offline - Response Code: "+e.status+". Offline status: "+er.isOffline()+". Will retry to send "+t.length+" items.")):(a(e),206===e.status?(r=r||i(sr(e)||e.response))&&!u._senderConfig.isRetryDisabled()?u._onPartialSuccess(t,r):u._onError(t,p(e)):(v=0,u._onSuccess(t,n))))},u.triggerSend=function(e,t,n){void 0===e&&(e=!0);try{u._senderConfig.disableTelemetry()?u._buffer.clear():0<u._buffer.count()&&(a=u._buffer.getItems(),m(n||0,e),t?t.call(T,a,e):u._sender(a,e)),clearTimeout(I),y=I=null}catch(i){a=(r=void 0===r?null:r)?r.toLowerCase():"",(!(e=ie(a=r?a:(r=Ne()||{})?(r.userAgent||"").toLowerCase():"",Te)?parseInt(a.split(Te)[1]):ie(a,_e)&&(a=parseInt(a.split(_e)[1]))?a+4:null)||9<e)&&u.diagLog().throwInternal(_.CRITICAL,X.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+ge(i),{exception:Le(i)})}var r,a},u._onError=function(e,t,n){u.diagLog().throwInternal(_.WARNING,X.OnError,"Failed to send telemetry.",{message:t}),u._buffer.clearSent(e)},u._onPartialSuccess=function(e,t){for(var n=[],r=[],a=0,i=t.errors.reverse();a<i.length;a++){var o=i[a],s=e.splice(o.index,1)[0];(f(o.statusCode)?r:n).push(s)}0<e.length&&u._onSuccess(e,t.itemsAccepted),0<n.length&&u._onError(n,p(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),0<r.length&&(c(r),u.diagLog().throwInternal(_.WARNING,X.TransmissionFailed,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+r.length+" our of "+t.itemsReceived+" items"))},u._onSuccess=function(e,t){u._buffer.clearSent(e)},u._xdrOnLoad=function(e,t){var n=sr(e);!e||n+""!="200"&&""!==n?(n=i(n))&&n.itemsReceived&&n.itemsReceived>n.itemsAccepted&&!u._senderConfig.isRetryDisabled()?u._onPartialSuccess(t,n):u._onError(t,h(e)):(v=0,u._onSuccess(t,0))}}),T}e.Sender=je,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch(a){}typeof n.value!==undefined&&(e[t]=n.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
//# sourceMappingURL=applicationinsights-channel-js.min.js.map
